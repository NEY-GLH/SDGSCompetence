{% extends "base2.html" %}
{% block content %}


<section>
    <h1><i class="fa fa-fw fa-paper-plane-o"></i> Reports By Section</h1>
    <small></small>

    {% if message %}
        <div class="alert alert-danger">
            <strong>Fail Whale!</strong> {{ message }}
        </div>
    {% endif %}

</section>

<!-- Main content -->
<section class="content container-fluid">
    <h3>Expired Assessments</h3>

    <div class="row">
        <div class="col-md-9">
            <!-- Custom Tabs -->
            <div class="nav-tabs-custom ">
                <ul class="nav nav-tabs">
                    {% for service in expired %}
                        {% if loop.index == 1 %}
                            <li class="active">
                        {% else %}
                            <li class="">
                        {% endif %}

                    <a href="#{{ service }}_expired" data-toggle="tab" aria-expanded="true">{{ service }}</a>
                    </li>
                    {% endfor %}

                </ul>
                <div class="tab-content">
                    {% for service in expired %}
                        {% if loop.index == 1 %}
                            <div class="tab-pane active" id="{{ service }}_expired">
                        {% else %}
                            <div class="tab-pane" id="{{ service }}_expired">
                        {% endif %}
                    <table class="table table-striped table-condensed  dataTable dt-responsive expired"
                           width="70%">
                        <thead>
                        <th>User</th>
                        <th>Competence</th>
                        <th>Earliest Expiry Date</th>
                        </thead>
                        {% for user in expired[service] %}
                            {% for competence in expired[service][user] %}
                            <tr>
                                <td>{{ user }}</td>
                                <td>{{ competence }}</td>
                                <td>{{ expired[service][user][competence] }}</td>
                            </tr>
                            {% endfor %}
                        {% endfor %}
                    </table>
                    </div>
                    {% endfor %}

                    </div>
                </div>
            </div>

        </div>


        <h3>Expiring Assessments</h3>

        <div class="row">
            <div class="col-md-9">
                <!-- Custom Tab -->
                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">
                        {% for service in expiring %}
                            {% if loop.index == 1 %}
                                <li class="active">
                            {% else %}
                                <li class="">
                            {% endif %}

                        <a href="#{{ service }}_expiring" data-toggle="tab"
                           aria-expanded="true">{{ service }}</a>
                        </li>
                        {% endfor %}

                    </ul>
                    <div class="tab-content">
                        {% for service in expiring %}
                            {% if loop.index == 1 %}
                                <div class="tab-pane active" id="{{ service }}_expiring">
                            {% else %}
                                <div class="tab-pane" id="{{ service }}_expiring">
                            {% endif %}
                        <table class="table table-striped table-condensed  dataTable dt-responsive expiring"
                               width="70%">
                            <thead>
                            <th>User</th>
                            <th>Competence</th>
                            <th>Earliest Expiry Date</th>
                            </thead>
                            {% for user in expiring[service] %}
                                {% for competence in expiring[service][user] %}
                                <tr>
                                    <td>{{ user }}</td>
                                    <td>{{ competence }}</td>
                                    <td>{{ expiring[service][user][competence] }}</td>
                                </tr>
                                {% endfor %}
                            {% endfor %}
                        </table>
                        </div>
                        {% endfor %}

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>





    <script src="/static/bower_components/chart.js/Chart.js"></script>
 <script>

     var expired = $('.expired').DataTable({
            "pageLength": 10,
            "ordering": true,
            "order": [[0, "asc"], [1, "asc"]]
        });


      var expiring = $('.expiring').DataTable({
        "pageLength": 10,
        "ordering": true,
        "order": [[0, "asc"], [1, "asc"]]
    });
 </script>

<!--    <script>-->


<!--        $(function () {-->
<!--            /* ChartJS-->
<!--             * -&#45;&#45;&#45;&#45;&#45;&#45;-->
<!--             * Here we will create a few charts using ChartJS-->
<!--             */-->

<!--            var data_expired = {-->
<!--                labels: [-->
<!--                    {% for name in user_expired %}-->
<!--                        "{{ name[0] }}",-->
<!--                    {% endfor %}-->

<!--                ],-->
<!--                datasets: [{-->
<!--                    data: [-->
<!--                        {% for name in user_expired %}-->
<!--                            {{ name[1] }},-->
<!--                        {% endfor %}-->

<!--                    ]-->

<!--                }]-->
<!--            }-->

<!--            var data_expiring = {-->
<!--                labels: [-->
<!--                    {% for name in user_expiring %}-->
<!--                        "{{ name[0] }}",-->
<!--                    {% endfor %}-->

<!--                ],-->
<!--                datasets: [{-->
<!--                    data: [-->
<!--                        {% for name in user_expiring %}-->
<!--                            {{ name[1] }},-->
<!--                        {% endfor %}-->

<!--                    ]-->

<!--                }]-->
<!--            }-->
<!--            //-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
<!--            //- BAR CHART - -->
<!--            //-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
<!--            var barChartCanvas = $('#barChart').get(0).getContext('2d')-->
<!--            var barChart = new Chart(barChartCanvas)-->
<!--            var barChartData = data_expired-->
<!--            barChartData.datasets[0].fillColor = '#ef4923'-->
<!--            barChartData.datasets[0].strokeColor = '#ef4923'-->
<!--            barChartData.datasets[0].pointColor = '#ef4923'-->
<!--            var barChartOptions = {-->
<!--                //Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value-->
<!--                scaleBeginAtZero: true,-->
<!--                //Boolean - Whether grid lines are shown across the chart-->
<!--                scaleShowGridLines: true,-->
<!--                //String - Colour of the grid lines-->
<!--                scaleGridLineColor: 'rgba(0,0,0,.05)',-->
<!--                //Number - Width of the grid lines-->
<!--                scaleGridLineWidth: 1,-->
<!--                //Boolean - Whether to show horizontal lines (except X axis)-->
<!--                scaleShowHorizontalLines: true,-->
<!--                //Boolean - Whether to show vertical lines (except Y axis)-->
<!--                scaleShowVerticalLines: true,-->
<!--                //Boolean - If there is a stroke on each bar-->
<!--                barShowStroke: true,-->
<!--                //Number - Pixel width of the bar stroke-->
<!--                barStrokeWidth: 2,-->
<!--                //Number - Spacing between each of the X value sets-->
<!--                barValueSpacing: 5,-->
<!--                //Number - Spacing between data sets within X values-->
<!--                barDatasetSpacing: 1,-->
<!--                //String - A legend template-->
<!--                {#      legendTemplate          : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',#}-->
<!--                //Boolean - whether to make the chart responsive-->
<!--                responsive: true,-->
<!--                maintainAspectRatio: true-->
<!--            }-->

<!--            barChartOptions.datasetFill = false-->
<!--            barChart.Bar(barChartData, barChartOptions)-->

<!--            var barChartCanvas = $('#barChart_expiring').get(0).getContext('2d')-->
<!--            var barChart = new Chart(barChartCanvas)-->
<!--            var barChartData = data_expiring-->
<!--            barChartData.datasets[0].fillColor = '#ef8f23'-->
<!--            barChartData.datasets[0].strokeColor = '#ef8f23'-->
<!--            barChartData.datasets[0].pointColor = '#ef8f23'-->
<!--            var barChartOptions = {-->
<!--                //Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value-->
<!--                scaleBeginAtZero: true,-->
<!--                //Boolean - Whether grid lines are shown across the chart-->
<!--                scaleShowGridLines: true,-->
<!--                //String - Colour of the grid lines-->
<!--                scaleGridLineColor: 'rgba(0,0,0,.05)',-->
<!--                //Number - Width of the grid lines-->
<!--                scaleGridLineWidth: 1,-->
<!--                //Boolean - Whether to show horizontal lines (except X axis)-->
<!--                scaleShowHorizontalLines: true,-->
<!--                //Boolean - Whether to show vertical lines (except Y axis)-->
<!--                scaleShowVerticalLines: true,-->
<!--                //Boolean - If there is a stroke on each bar-->
<!--                barShowStroke: true,-->
<!--                //Number - Pixel width of the bar stroke-->
<!--                barStrokeWidth: 2,-->
<!--                //Number - Spacing between each of the X value sets-->
<!--                barValueSpacing: 5,-->
<!--                //Number - Spacing between data sets within X values-->
<!--                barDatasetSpacing: 1,-->
<!--                //String - A legend template-->
<!--                {#      legendTemplate          : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',#}-->
<!--                //Boolean - whether to make the chart responsive-->
<!--                responsive: true,-->
<!--                maintainAspectRatio: true-->
<!--            }-->

<!--            barChartOptions.datasetFill = false-->
<!--            barChart.Bar(barChartData, barChartOptions)-->


<!--        })-->

<!--    </script>-->

{% endblock %}